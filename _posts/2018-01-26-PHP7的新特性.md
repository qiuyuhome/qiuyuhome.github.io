---
layout: post
title: PHP7的新特性
categories: PHP
description: PHP7的新特性
keywords: PHP, PHP7
---

## PHP5.6升级到PHP7.1.13遇到的坑

> 生命在于不断的折腾

不知道是谁说的这句话, 对于 `程序猿` 来说. 折腾就等于踩坑.

公司爬虫服务器好端端的. 我非得要折腾一下, 脑袋一热, 从原来的 `PHP5.6`, 升级到了 `PHP7.1.13`.

升级过程中又踩了几个坑. 分享出来. 大家一起踩坑.

### 预期时间不准确.

由于升级PHP版本, 需要停止php进程. 所以在公司钉钉上通知了大家, 某些功能暂时不可用.
然后别人问我, 多久能搞定. 我脑袋一热, 说: `10分钟左右`.

10分钟, 对于升级PHP来说, 足够了. but, 升级完, 其他的问题才是关键.

#### php扩展需要重新安装

如: `postgreSQL的PDO扩展`, `reids`, `xdebug` 等等.

这个都是我的锅, 这么明显的问题我都没有事先考虑. 哎. 还好有同事小涛神助攻, 几条命令下去就搞定.

#### php代码报错

代码报错不可怕, 可怕的是, 你不知道在什么时候给你报错.

由于代码写的不健壮, 代码报错不可预估. 这个是我现在急需要改进的.

#### 总结

要预先做好评估. 可以评估不准确, 但是要尽可能的多想. 不要没有想就开始做. 

## 折腾用不止步

> 折腾完了, 继续折腾

把扩展装上, 代码修复一下, 脚本跑起来. 我居然在想, 这个服务器升级了, 是不是也把网站的服务器也搞一下.

想了想, 以后再搞吧.

## php7的新特性

> 不能白折腾

折腾完了, 总得有点收获吧. 其实, 到现在我也不知道PHP7的新特性都有哪些. 只是知道 `PHP7` 重新编写了内核. 比 `php5` 快了很多.

所以, 容我先去查查资料.

[php manual](http://php.net/manual/zh/migration70.php)

大概的浏览了一下. 新的问题又来了. 哎.

1. 什么时候使用抛出异常功能.
2. assert()断言的使用场景.
3. 生成器是什么? yield的作用.
4. preg_replace_callback() 和preg_replace_callback_array() 的使用
5. declare(strict_types=1)

> 生命在于折腾, 明天继续折腾.

创作时间: 2018-01-26 23:00:01