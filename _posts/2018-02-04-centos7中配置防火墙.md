

## 参考

[linux防火墙iptables的原理及配置详解](http://www.178linux.com/85281)

[iptables详解](http://www.zsythink.net/archives/1199)

[firewalld](http://www.firewalld.org/documentation/)

[FirewallD](https://linux.cn/article-8098-1.html)

[使用 firewalld 构建 Linux 动态防火墙](https://www.ibm.com/developerworks/cn/linux/1507_caojh/index.html)

```
在刚买的ceno 7服务器中安装vsftpd之后想打开防火墙端口  结果/etc/sysconfig/目录下没有iptables文件  这时候就需要自己写一个iptables文件并且写入相关指令  然后使用 service iptables save 时显示 The service command supports only basic LSB actions (start, stop, restart, try-restart, reload, force-reload, status). For other actions, please try to use systemctl.
百思不得其解，然后上网百度之后，找到了解决方法：
首先不管防火墙有没有关 都使用systemctl stop firewalld 关闭防火墙
然后使用 yum install iptables-services 安装或更新服务
再使用systemctl enable iptables 启动iptables
最后 systemctl start iptables 打开iptables
大功告成
试试service iptables save
```

## 使用

### 启动服务，并在系统引导时启动该服务：

```zsh
systemctl start firewalld
systemctl enable firewalld
```

要停止并禁用：

```
systemctl stop firewalld
systemctl disable firewalld
```

### 重新加载 FirewallD 配置：

```
firewall-cmd --reload
```

    FirewallD 使用 XML 进行配置。除非是非常特殊的配置，你不必处理它们，而应该使用 firewall-cmd。
    
    配置文件位于两个目录中：
    
    /usr/lib/FirewallD 下保存默认配置，如默认区域和公用服务。 
    避免修改它们，因为每次 firewall 软件包更新时都会覆盖这些文件。
    /etc/firewalld 下保存系统配置文件。 这些文件将覆盖默认配置。


### 配置集

    FirewallD 使用两个配置集：“运行时”和“持久”。 在系统重新启动或重新启动 FirewallD 时，不会保留运行时的配置更改，而对持久配置集的更改不会应用于正在运行的系统。
    
    默认情况下，firewall-cmd 命令适用于运行时配置，但使用 --permanent 标志将保存到持久配置中。要添加和激活持久性规则，你可以使用两种方法之一。
    
    1、 将规则同时添加到持久规则集和运行时规则集中。 
    
    sudo firewall-cmd --zone=public --add-service=http --permanent
    sudo firewall-cmd --zone=public --add-service=http
    2、 将规则添加到持久规则集中并重新加载 FirewallD。 
    
    sudo firewall-cmd --zone=public --add-service=http --permanent
    sudo firewall-cmd --reload


> reload 命令会删除所有运行时配置并应用永久配置。因为 firewalld 动态管理规则集，所以它不会破坏现有的连接和会话。

